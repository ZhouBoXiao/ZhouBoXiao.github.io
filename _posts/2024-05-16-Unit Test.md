---
layout:     post
title:      "Java单元测试之道"
subtitle:   "Java单元测试之道"
date:       2024-05-16
author:     "ZBX"
header-img: "img/tag-bg.jpg"
tags:
    - UT
    - Spring

---

# Types of Testing

Spring Boot applications can be tested at various levels, including:

1. Unit Testing: Testing individual components, such as classes or methods, in isolation.
2. Integration Testing: Verifying that different components or services work correctly together.
3. Functional Testing: Testing the application’s functionality from the user’s perspective.
4. End-to-End Testing: Testing the entire application, including its external dependencies, in a production-like environment.

# Spring Test

## Testing the Web Layer

1. Use `@SpringBootTest` to load the entire Spring context.

```java
@SpringBootTest
@AutoConfigureMockMvc
class TestingWebApplicationTest {

	@Autowired
	private MockMvc mockMvc;

	@Test
	void shouldReturnDefaultMessage() throws Exception {
		this.mockMvc.perform(get("/")).andDo(print()).andExpect(status().isOk())
				.andExpect(content().string(containsString("Hello, World")));
	}
}
```

2. Use  `MockMvc` to simulate HTTP requests and test the response from your controller. Use `@AutoConfigureMockMvc` to automatically configure `MockMvc`

3. Use `@MockBean` to replace a real bean with a mock implementation.

   > `@Mock` vs `@MockBean`:
   > 
   > `@Mock` is used for unit testing and mocking objects outside of the Spring context, while `@MockBean` is used for Spring Boot integration testing to replace real beans with mock or spy versions within the Spring application context.
   
4. ```
   Use @DataJpaTest to test repositories with an embedded database.
   ```

   